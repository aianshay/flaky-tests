expiringKeys
conf
rmDTMasterKeyState
when
getRMDelegationToken
Assert
delegationToken
getClientRMService
getRMDTSecretManagerState
token1
 record the current key
init
 tokenRemoverThread.rollMasterKey()
thenReturn
containsKey
getTokenState
oldCurrentKey
decodeIdentifier
getRenewer
convertFromYarn
 rollMasterKey is called every 1 second.
contains
stop
mock
 request to generate a RMDelegationToken
testRMDTMasterKeyStateOnRollingMasterKey
request
getCurrentKey
assertFalse
ConverterUtils
sleep
assertTrue
rm1
get
rmState
dtSecretManager
 wait for the first rollMasterKey
renewer1
rmDTState
start
assertEquals
Thread
memStore
dtId1
getState
 assert all master keys are saved
getRMDTSecretManager
getAllMasterKeys
addAll
response
getMasterKeyState
getDelegationToken
 assert old-current-key and new-current-key exist
newCurrentKey
