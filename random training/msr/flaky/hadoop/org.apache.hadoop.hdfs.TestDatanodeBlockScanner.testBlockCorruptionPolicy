cluster
assertFalse
conf
/tmp/testBlockVerification/file1
fs
waitReplication
 Read the file to trigger reportBadBlocks by client
createFile
waitActive
rand
random
restartDataNode
 its replicas
assertTrue
block
copyBytes
DFSTestUtil
DFSConfigKeys
MiniDFSCluster
 and we should get all the replicas
 Corrupt random replica of block
 Restart the datanode hoping the corrupt block to be reported
nextInt
getFileSystem
corruptReplica
testBlockCorruptionPolicy
setLong
IOUtils
build
numDataNodes
 We have 2 good replicas and block is not corrupt
allBlockReplicasCorrupt
file1
getFirstBlock
open
shutdown
