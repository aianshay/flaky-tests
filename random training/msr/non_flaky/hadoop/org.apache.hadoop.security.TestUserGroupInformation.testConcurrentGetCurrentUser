next
getSubject
 concurrent getCurrentUser on ugi1 should not be blocked.
getCurrentUser
blockingLookup
getName
 unblock the original call.
submit
 wait for the thread to block on the barrier in getCurrentUser.
testUgi2
testUgi1
principals
run
newSingleThreadExecutor
Executors
when
remove
iterator
barrier
ugi
get
await
latch
countDown
UserGroupInformation
add
callRealMethod
 concurrent getCurrentUser on ugi2 should not be blocked.
getPrincipals
testConcurrentGetCurrentUser
createRemoteUser
assertSame
 workaround this by swapping out the spy with the original User.
 concurrent.  Ie. no synchronization.
call
invocation
doAs
answer
Mockito
 spy is called for the user name.
spyUser
thenAnswer
user
spy
